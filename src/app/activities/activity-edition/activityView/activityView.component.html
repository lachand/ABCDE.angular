<script src="../../../../main.ts"></script>
<!--<div style="height: 400px; overflow-y: auto" ngx-auto-scroll lock-y-offset="10" observe-attributes>-->
<div fxFlex="100%" class="flex-card">
  <mat-card class="mat-card">

    <h3>
      <div *ngIf="activityService?.activityLoaded?.type === 'Main'">
        <div class="activity-name">
          <button mat-button (click)="backClicked();"><mat-icon>arrow_back</mat-icon></button>
          <div class="right">
            <activity-name [activityId]="activityService?.activityLoaded?._id"></activity-name>
          </div>
        </div>
        <div>
          <mat-chip-list class="chip-list">
            <mat-chip *ngIf="user.fonction === 'Enseignant'" class="chip" #chip (mouseenter)="onHovering($event);" (mouseleave)="onUnovering($event)" (click)="activityEdit()">
              <mat-icon>edit</mat-icon>
              {{editActivity}}
            </mat-chip>

            <mat-chip *ngIf="user.fonction === 'Enseignant'" class="chip" #chip (mouseenter)="onHoveringGroupView($event);" (mouseleave)="onUnoveringGroupView($event)" (click)="activityGroupView()">
              <mat-icon>group</mat-icon>
              {{viewGroup}}
            </mat-chip>

          </mat-chip-list>
        </div>
      </div>

      <div *ngIf="activityService?.activityLoaded?.type === 'Sequence'">
        <div class="activity-name">
        <button mat-button (click)="backClicked();"><mat-icon>arrow_back</mat-icon></button>
          <div class="right">
        <activity-name [activityId]="activityService?.activityLoaded?.parent"
        ></activity-name> :
        <activity-name [activityId]="activityService?.activityLoaded?._id"
        ></activity-name>
          </div>
        </div>
        <mat-chip-list class="chip-list">
          <mat-chip *ngIf="user.fonction === 'Enseignant'" class="chip" #chip (mouseenter)="onHovering($event);" (mouseleave)="onUnovering($event)" (click)="activityEdit()">
            <mat-icon>edit</mat-icon>
            {{editActivity}}
          </mat-chip>

          <mat-chip *ngIf="user.fonction === 'Enseignant'" class="chip" #chip (mouseenter)="onHoveringGroupView($event);" (mouseleave)="onUnoveringGroupView($event)" (click)="activityGroupView()">
            <mat-icon>group</mat-icon>
            {{viewGroup}}
          </mat-chip>

        </mat-chip-list>
        </div>
    </h3>

    <div *ngIf="steps.length > 0" class="left-aligned">
      <mat-horizontal-stepper class="stepperLeft" [linear]="false" (selectionChange)="loadActivity($event)" #stepper>
        <mat-step *ngFor="let step of steps" [completed]="false" [editable]="true">
          <ng-template matStepLabel>
            <activity-name [activityId]="step"></activity-name>
          </ng-template>
        </mat-step>
      </mat-horizontal-stepper>
    </div>

    <div fxLayout="row" fxLayout.xs="column" class="flex-main-div">

      <div fxFlex="30%">

        <div>
          <mat-card class="flex-card">
            <app-activity-description-edit [edit]="false"></app-activity-description-edit>
          </mat-card>
        </div>


        <div>
          <mat-card class="flex-card">
            <mat-card-header>
              <h3 mat-line i18n="@@resources">Ressources</h3>
            </mat-card-header>
            <app-activity-resources [edit]="true"></app-activity-resources>
          </mat-card>
        </div>

        <div>
          <mat-card class="flex-card">
            <mat-card-header>
              <h3 mat-line i18n="@@applications">Applications</h3>
            </mat-card-header>
            <app-activity-apps-edit [edit]="false"></app-activity-apps-edit>
          </mat-card>
        </div>

        <div>
          <mat-card class="flex-card">
            <app-activity-participants-edit [edit]="false"></app-activity-participants-edit>
          </mat-card>
        </div>

      </div>

      <div fxFlex="70%">
        <application-launched *ngFor="let app of appsService.applications"
                              [appId]="app"></application-launched>
        <resource-opened *ngFor="let resource of resourcesService.resources"
                         [resourceId]="resource"></resource-opened>
      </div>

    </div>

  </mat-card>
</div>
